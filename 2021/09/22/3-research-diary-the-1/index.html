<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>研究日记-虚拟歌姬自动调教之歌曲音频切割的问题 | </title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.11.0/mermaid.min.js"></script><script>mermaid.initialize({
  startOnLoad: true
  , theme: 'dark'
});</script><link rel="stylesheet" href="/RabbitWH/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/RabbitWH/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/RabbitWH/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/RabbitWH/atom.xml" title="" type="application/atom+xml">
</head><body><header><nav><a href="/RabbitWH/">Home</a><a href="/RabbitWH/about/">About</a><a href="/RabbitWH/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>研究日记-虚拟歌姬自动调教之歌曲音频切割的问题</h1><hr></div><div id="post-content"><p>作者：@Discover<br>本文章出自企划：麻瓜指南，一个创作者互帮互助共同创作的企划。联系方式见文末尾。</p>
<h2 id="结论放前面"><a href="#结论放前面" class="headerlink" title="结论放前面"></a>结论放前面</h2><blockquote>
<p>数理基础比较薄弱的时候，千万不要碰音频分析！</p>
</blockquote>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>这篇研究日记是在研究出现状况时的一份记录，分享出来，方便自己记忆查阅，也方便有类似想法的朋友 <strong>避坑</strong>。</p>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>虚拟歌姬自动调教是我正在研究的一个深度学习的落地方式。期间为了提升模型的效果，我们尝试了很多方法，其中之一便是这篇文章将要讨论到的歌曲音频切割。</p>
<span id="more"></span>

<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>歌曲音频切割的目标是根据歌曲波形信息，将每一个字对应的音频进行切割。</p>
<h3 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h3><p>相较于一般的对话音频，歌曲音频中字与字的间隔非常模糊，就算是人自己也不容易清晰辨识歌曲音频中的每一个字。</p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>经过连续几个休息日的复现和实验，我整理了以下几种切割方案。</p>
<h3 id="根据停顿对歌曲进行切割"><a href="#根据停顿对歌曲进行切割" class="headerlink" title="根据停顿对歌曲进行切割"></a>根据停顿对歌曲进行切割</h3><p>顾名思义就是根据静音区间进行切割。设置响度阀值，低于这个响度的音频都视作静音片段。在处理对话文本时最常用的也是这种方法，因为他最大的好处就是快速可靠。</p>
<p>python代码部分使用的是pydub模块，详细代码参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wangqianqianya/article/details/89605298?utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">Python pydub实现语音停顿切分</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pydub <span class="keyword">import</span> AudioSegment</span><br><span class="line"><span class="keyword">from</span> pydub.silence <span class="keyword">import</span> split_on_silence</span><br><span class="line"></span><br><span class="line">chunks = split_on_silence(sound,</span><br><span class="line">    <span class="comment"># must be silent for at least half a second</span></span><br><span class="line">    min_silence_len=<span class="number">500</span>,</span><br><span class="line">    <span class="comment"># consider it silent if quieter than -16 dBFS</span></span><br><span class="line">    silence_thresh=-<span class="number">16</span>)</span><br></pre></td></tr></table></figure>

<h3 id="采用KMEANS方法进行切割"><a href="#采用KMEANS方法进行切割" class="headerlink" title="采用KMEANS方法进行切割"></a>采用KMEANS方法进行切割</h3><p>类似的思想我在<a href="46-seperate-lyric-by-k-mean.md">这篇文章中有提到</a>。使用聚类的方法对音频进行分割，实现对音频的分段。</p>
<p>具体的实现代码这里我推荐一个Github上的项目：<a target="_blank" rel="noopener" href="https://github.com/Discover304/py_speech_seg">py_speech_seg</a>这里面有比较完善的使用Kmeans方法<br>结合接下来要提到的VAD算法进行音频分割的python函数。</p>
<p>不使用VAD的Kmeans方法无法对音频进行合理的切割，经常会有字中分割的情况，而且无法拟合字数，因而无法确定具体的类别个数 K。</p>
<p>采用VAD算法预处理后再使用Kmeans方法速度更快，效果更好，可以实现在停顿部分进行切割。但是依然需要根据程序的实验结果，人为确定类别个数K，而且存在文本粘连问题，往往一段切割出来的文本中包含好几个字。</p>
<h3 id="根据VAD算法识别间隔并切割"><a href="#根据VAD算法识别间隔并切割" class="headerlink" title="根据VAD算法识别间隔并切割"></a>根据VAD算法识别间隔并切割</h3><blockquote>
<p>语音激活检测（VAD, Voice Activation Detection）算法主要是用来检测当前声音信号中是否存在人的话音信号的。该算法通过对输入信号进行判断，将话音信号片段与各种背景噪声信号片段区分出来，使得我们能够分别对两种信号采用不同的处理方法。</p>
</blockquote>
<p>详见：<a target="_blank" rel="noopener" href="https://blog.ailemon.net/2021/02/18/introduction-to-vad-theory/">还是不会VAD？三分钟看懂语音激活检测方法</a></p>
<h3 id="采用BIC方法进行切割"><a href="#采用BIC方法进行切割" class="headerlink" title="采用BIC方法进行切割"></a>采用BIC方法进行切割</h3><blockquote>
<p>在统计学里，处理模型选择问题时我们往往采用BIC进行判定，即贝叶斯信息准则。BIC是似然函数(likelihood function)加上一个惩罚项组成的，这个加上的惩罚项与模型拟合的参数有关，这样可以防止过拟合。</p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wblgers1234/article/details/75896605">Python实现基于BIC的语音对话分割</a><br>参考：<a target="_blank" rel="noopener" href="https://www.semanticscholar.org/paper/Speaker%2C-Environment-and-Channel-Change-Detection-Chen/84f343209a5072509b93d16db408d4e9ad88a8a6">Speaker, Environment and Channel Change Detection and Clustering via the Bayesian Information Criterion</a></p>
<p>相较于Kmeans方法，采用BIC的切割相对较慢，但是片段的准确度较高。字的粘连问题得到一定的解决。</p>
<h3 id="采用BILSTM方法进行切割（可能的方法）"><a href="#采用BILSTM方法进行切割（可能的方法）" class="headerlink" title="采用BILSTM方法进行切割（可能的方法）"></a>采用BILSTM方法进行切割（可能的方法）</h3><p>在之前提到的<code>py_speech_seg</code>项目中有一种还未完成的机器学习的方法，BILSTM方法，不确定其可行性。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>每一种方法都有自己的特点，但是没有一种能够满足我的需求，需要进一步研究。因此最开始的虚拟歌姬自动调教项目需要放缓。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangqianqianya/article/details/89605298?utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">Python pydub实现语音停顿切分</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Discover304/py_speech_seg">py_speech_seg</a> 一个比较完备但未开发完成的音频切割方法库</li>
<li><a target="_blank" rel="noopener" href="https://blog.ailemon.net/2021/02/18/introduction-to-vad-theory/">还是不会VAD？三分钟看懂语音激活检测方法</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wblgers1234/article/details/75896605">Python实现基于BIC的语音对话分割</a></li>
<li><a target="_blank" rel="noopener" href="https://www.semanticscholar.org/paper/Speaker%2C-Environment-and-Channel-Change-Detection-Chen/84f343209a5072509b93d16db408d4e9ad88a8a6">Speaker, Environment and Channel Change Detection and Clustering via the Bayesian Information Criterion</a></li>
</ul>
<hr>
<p>我们有一个堆满创意点子的秘密基地，里面有很多有意思的小伙伴。生活什么的、技术什么的、二次元什么的都可以聊得开。欢迎加入我们的小群：<strong>兔叽的魔术工房</strong>。群内会经常发布各种各样的企划，总会遇上你感兴趣的。</p>
<p><img src="https://image.discover304.top/miku_sound.jpeg"></p>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/RabbitWH/2021/09/18/2-mvc-real-life/">MVC 软件架构对于现实生活的启发 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: 'A9RWVELPcIotgfbpp9KLGXQM-gzGzoHsz'
 , appKey: 'MLgPQW5h0DPgE8jNkeREKubU'
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/RabbitWH/" id="logo"><img src="https://image.discover304.top/%E5%85%94%E5%8F%BD.jpg" alt="Logo"></a><h1 id="Dr"><a href="/"> Dr.RMH</a></h1><section id="total"><a id="total-archives" href="/RabbitWH/archives"><span class="total-title">Archives Total:</span><span class="total-number">7</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">5</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">3</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA%E6%94%BE%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">结论放前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">2.</span> <span class="toc-text">背景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">2.2.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%91%E6%88%98"><span class="toc-number">2.3.</span> <span class="toc-text">挑战</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%81%9C%E9%A1%BF%E5%AF%B9%E6%AD%8C%E6%9B%B2%E8%BF%9B%E8%A1%8C%E5%88%87%E5%89%B2"><span class="toc-number">3.1.</span> <span class="toc-text">根据停顿对歌曲进行切割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8KMEANS%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%88%87%E5%89%B2"><span class="toc-number">3.2.</span> <span class="toc-text">采用KMEANS方法进行切割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEVAD%E7%AE%97%E6%B3%95%E8%AF%86%E5%88%AB%E9%97%B4%E9%9A%94%E5%B9%B6%E5%88%87%E5%89%B2"><span class="toc-number">3.3.</span> <span class="toc-text">根据VAD算法识别间隔并切割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8BIC%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%88%87%E5%89%B2"><span class="toc-number">3.4.</span> <span class="toc-text">采用BIC方法进行切割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8BILSTM%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%88%87%E5%89%B2%EF%BC%88%E5%8F%AF%E8%83%BD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">采用BILSTM方法进行切割（可能的方法）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">4.</span> <span class="toc-text">结论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">5.</span> <span class="toc-text">参考</span></a></li></ol></div></div><footer><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><script src="/RabbitWH/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>