<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Python 有序字典和集合 | </title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/mermaid/8.11.0/mermaid.min.js"></script><script>mermaid.initialize({
  startOnLoad: true
  , theme: 'dark'
});</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
</head><body><header><nav><a href="//">Home</a><a href="/notice/">Notice</a><a href="/announce/">Announce</a><a href="/categories/GroupRelated/">GroupBlog</a><a href="/about/">About</a><a href="/QA/">Q&amp;A</a><a href="/updatehis/">UpdateHis</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>Python 有序字典和集合</h1><hr></div><div id="post-content"><p>作者：@欧礼图<br>本文章出自企划：麻瓜指南，一个创作者互帮互助共同创作的企划。联系方式见文末尾。</p>
<hr>
<p>众所周知，字典的一大特性就是元素是无序排列的。那想让字典记住元素的插入顺序该怎么做呢？这就需要用到有序字典这一数据结构了。在正式介绍前，有一点需要读者注意：有序并不是指字典里的元素会按照大小顺序排列，而是说字典会记住所有元素插入的顺序，类似于链表。现在我们就来详细讲解一下有序字典都有什么功能，以及你应该怎么来使用它。</p>
<h2 id="有序字典"><a href="#有序字典" class="headerlink" title="有序字典"></a>有序字典</h2><p>定义：python有序字典通常指<code>collections</code>库里的<code>OrderedDict</code>类。它继承python的<code>dict</code>类，也就意味着它和普通字典的使用方法相同，但在某些方法上有所差异。</p>
<span id="more"></span>

<p>使用及方法：</p>
<ol>
<li><p><code>popitem(*last*=True)</code></p>
<p> <code>popitem</code>函数原是字典内置函数，作用是返回并删除字典中最后一个元素。在<code>OrderedDict</code>里，该函数支持传入<code>last</code>关键字，当<code>last=True</code>时作用与普通字典相同，<code>last=False</code>时改为返回并删除字典首个元素。示例如下：</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict = OrderedDict.fromkeys(<span class="string">&#x27;law&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict</span><br><span class="line">OrderedDict([(<span class="string">&#x27;l&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;w&#x27;</span>, <span class="literal">None</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict.popitem(last=<span class="literal">False</span>)</span><br><span class="line">(<span class="string">&#x27;l&#x27;</span>, <span class="literal">None</span>) <span class="comment"># 删除为字典首个元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict.popitem(last=<span class="literal">True</span>)</span><br><span class="line">(<span class="string">&#x27;w&#x27;</span>, <span class="literal">None</span>) <span class="comment"># 删除为字典末位元素</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>move_to_end(*key, last*=True)</code></p>
<p> 该函数为<code>OrderedDict</code>独有函数，作用为将指定键值对应元素移到首位或末尾。当<code>last=False</code>时，移除首个元素。<code>last=True</code>时，移除末位元素。示例如下：</p>
 <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict = OrderedDict.fromkeys(<span class="string">&#x27;law&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict.move_to_end(<span class="string">&#x27;w&#x27;</span>, last=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict</span><br><span class="line">OrderedDict([(<span class="string">&#x27;w&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;l&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="literal">None</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict.move_to_end(<span class="string">&#x27;w&#x27;</span>, last=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict</span><br><span class="line">OrderedDict([(<span class="string">&#x27;l&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;w&#x27;</span>, <span class="literal">None</span>)])</span><br></pre></td></tr></table></figure></li>
</ol>
<p>拓展阅读：更多<code>OrderedDict</code>特性可在<a target="_blank" rel="noopener" href="https://www.google.com/">官网</a>查看</p>
<h2 id="有序集合"><a href="#有序集合" class="headerlink" title="有序集合"></a>有序集合</h2><p>概述：有序集合可以利用有序字典中<code>fromkeys</code>函数创建，我们可以将元素转化为<code>key: None</code>的键值对。示例如下：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict = OrderedDict()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict[<span class="string">&#x27;key&#x27;</span>] = <span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict[<span class="string">&#x27;anotherKey&#x27;</span>] = <span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test_ordered_dict</span><br><span class="line">OrderedDict([(<span class="string">&#x27;key&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;anotherKey&#x27;</span>, <span class="literal">None</span>)])</span><br></pre></td></tr></table></figure>
<p>除此之外，一些python第三方库提供了有序集合的实现。这里提供一些参考：<br><a target="_blank" rel="noopener" href="https://pypi.org/project/ordered-set/">ordered-set</a>、<br><a target="_blank" rel="noopener" href="https://pypi.org/project/orderedset/">orderedset</a> (Cython based)、<a target="_blank" rel="noopener" href="https://boltons.readthedocs.io/en/latest/setutils.html">boltons-IndexedSet</a>。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>在python3.7之后，普通字典也支持记住元素的插入顺序。那我们以后就可以用普通字典来代替有序字典了吗？答案很显然是否定的。除了上述多出的方法之外，如果我们想比较两个字典是否相等，有序字典还会自动检查元素的插入顺序。即使两个有序字典内容完全一样，如果插入顺序有所差异，这两个有序字典便不会判定为相等。更多差异请参考<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/collections.html#ordereddict-objects">官网</a>。</p>
<hr>
<p>我们有一个堆满创意点子的秘密基地，里面有很多有意思的小伙伴。生活什么的、技术什么的、二次元什么的都可以聊得开。欢迎加入我们的小群：<strong>兔叽的魔术工房</strong>。群内会经常发布各种各样的企划，总会遇上你感兴趣的。</p>
<p><img src="https://api.btstu.cn/sjbz/api.php?lx=dongman&format=images"></p>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2021/10/03/4-week1-meeting/">麻瓜指南 UPDATE MEETING 1 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: 'A9RWVELPcIotgfbpp9KLGXQM-gzGzoHsz'
 , appKey: 'MLgPQW5h0DPgE8jNkeREKubU'
 , placeholder: '可以留下评论呀。（选填姓名、邮箱和个人博客链接。）'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://image.discover304.top/%E5%85%94%E5%8F%BD.jpg" alt="Logo"></a><h1 id="Dr"><a href="/"> Dr.RWH</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">9</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">5</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">3</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E5%AD%97%E5%85%B8"><span class="toc-number">1.</span> <span class="toc-text">有序字典</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-number">2.</span> <span class="toc-text">有序集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD"><span class="toc-number">3.</span> <span class="toc-text">结语</span></a></li></ol></div></div><footer><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>